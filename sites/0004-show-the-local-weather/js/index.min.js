var lat,lon;function pullWeather(){var c="011ffb7f7744c9434fcbcdc0c9a0b65f";var a="?units=si";var b="https://api.darksky.net/forecast/"+c+"/"+lat+","+lon+a;return $.ajax({url:b,dataType:"jsonp",success:function(d){console.log("Success! Displaying weather...");report(d)},error:function(){console.log("Unable to display weather.")}})}$.getJSON("https://ipinfo.io",function(b){console.log("IP address detected: "+b.ip+". Lat, Lon: "+lat+", "+lon);var a=b.loc.split(",");lat=a[0];lon=a[1];pullWeather()});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){lat=(a.coords.latitude).toFixed(3);lon=(a.coords.longitude).toFixed(3);console.log("HTML5 geolocation permitted. Lat, Lon: "+lat+", "+lon);pullWeather()})}else{console.log("HTML5 geolocation not permitted.")}function report(g){var d="AIzaSyAMejMCinUM1S2dzyVCpJf9q-Ns-e1YSnw";var h="https://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&key"+d;$.getJSON(h,function(i){$("#location").html(i.results[0].address_components[2].long_name+", "+i.results[0].address_components[4].long_name+", "+i.results[0].address_components[5].long_name)});var e={clear_day:"\u2600️",clear_night:"\uD83C\uDF19",rain:"\u2614️",snow:"\uD83C\uDF28",sleet:"\uD83C\uDF27",wind:"\uD83C\uDF2C",fog:"\uD83C\uDF2B",cloudy:"\u2601️",partly_cloudy_day:"\uD83C\uDF25",partly_cloudy_night:"\uD83C\uDF19\u2601️"};$("#icon").html(e[""+g.currently.icon.replace(/-/g,"_")]).attr("title",g.currently.summary);function a(j){var i="";switch(true){case (j<0):i="rgba(1, 1, 255, 1.0)";break;case ((j>=0)&&(j<4.44)):i="rgba(1, 146, 255, 1.0)";break;case ((j>=4.44)&&(j<10)):i="rgba(76, 192, 220, 1.0)";break;case ((j>=10)&&(j<15.56)):i="rgba(1, 255, 154, 1.0)";break;case ((j>=15.56)&&(j<21.11)):i="rgba(156, 255, 41, 1.0)";break;case ((j>=21.11)&&(j<26.67)):i="rgba(255, 248, 3, 1.0)";break;case ((j>=26.67)&&(j<32.22)):i="rgba(255, 163, 3, 1.0)";break;case ((j>=32.22)&&(j<37.78)):i="rgba(255, 87, 3, 1.0)";break;case (j>=37.78):i="rgba(255, 0, 0, 1.0)";break;default:i="pink";break}return i}var c=Math.round(g.currently.temperature);$("#tempC").html(c+"&deg;");$("#buttonM").html("C");$("#tempF").html(Math.round(c*1.8+32)+"&deg");$("#buttonI").html("F");$("body").css("background-color",a(c));$("#currentDescription").html(g.currently.summary);$("#dailySummary").html(g.daily.summary);$("#windSpeedM").html((g.currently.windSpeed).toFixed(1)+" m/s, ");$("#windSpeedI").html((g.currently.windSpeed*2.23694).toFixed(1)+" mph, ");var b=Math.round(g.currently.windBearing);function f(i){switch(true){case (((i>348.75)&&(i<=360))||((i>=0)&&(i<=11.25))):answer=i+"&deg N";break;case ((i>11.25)&&(i<=33.75)):answer=i+"&deg NNE";break;case ((i>33.75)&&(i<=56.25)):answer=i+"&deg NE";break;case ((i>56.25)&&(i<=78.75)):answer=i+"&deg ENE";break;case ((i>78.75)&&(i<=101.25)):answer=i+"&deg E";break;case ((i>101.25)&&(i<=123.75)):answer=i+"&deg ESE";break;case ((i>123.75)&&(i<=146.25)):answer=i+"&deg SE";break;case ((i>146.25)&&(i<=168.75)):answer=i+"&deg SSE";break;case ((i>168.75)&&(i<=191.25)):answer=i+"&deg S";break;case ((191.25>i)&&(i<=213.75)):answer=i+"&deg SSW";break;case ((213.75>i)&&(i<=236.25)):answer=i+"&deg SW";break;case ((i>236.25)&&(i<=258.75)):answer=i+"&deg WSW";break;case ((i>258.75)&&(i<=281.25)):answer=i+"&deg W";break;case ((i>281.25)&&(i<=303.75)):answer=i+"&deg WNW";break;case ((i>303.75)&&(i<=326.25)):answer=i+"&deg NW";break;case ((i>326.25)&&(i<=348.75)):answer=i+"&deg NNW";break;default:answer="";break}return answer}$("#windDeg").html(f(b));$("#pressureM").html(Math.round(g.currently.pressure)+" hPa");$("#pressureI").html(Math.round(g.currently.pressure*0.03)+" inHg");$("#humidity").html(Math.round(g.currently.humidity*100)+"%");if(g.currently.visibility!==undefined){$("#visibilityM").html((g.currently.visibility).toFixed(1)+" km");$("#visibilityI").html((g.currently.visibility*0.621).toFixed(1)+" mi")}else{$("#visibilityM, #visibilityI").html("Unavailable")}if(g.currently.cloudCover!==undefined){$("#clouds").html(g.currently.cloudCover+"%")}else{$("#clouds").html("Unavailable")}}$("#buttonM, #buttonI").click(function(){$("#tempC, #tempF").toggleClass("goAway");$("#windSpeedM, #windSpeedI").toggleClass("goAway");$("#visibilityM, #visibilityI").toggleClass("goAway");$("#pressureM, #pressureI").toggleClass("goAway");$("#buttonM, #buttonI").toggleClass("goAway");$("#dailySummary").toggleClass("goAway")});