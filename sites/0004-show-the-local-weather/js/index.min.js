var lat,lon;function pullWeather(){var c="011ffb7f7744c9434fcbcdc0c9a0b65f";var a="?units=si";var b="https://api.darksky.net/forecast/"+c+"/"+lat+","+lon+a;return $.ajax({url:b,dataType:"jsonp",success:function(d){console.log("Success! Displaying weather...");report(d)},error:function(){console.log("Unable to display weather.")}})}$.getJSON("https://ipinfo.io",function(b){console.log("IP address detected: "+b.ip+". Lat, Lon: "+lat+", "+lon);var a=b.loc.split(",");lat=a[0];lon=a[1];var c=b.country;if(b.country=="KR"){c="South Korea"}$("#location").html(b.city+", "+b.region+", "+c);pullWeather()});function report(h){if(h.currently.icon){$("#icon").addClass("wi-forecast-io-"+h.currently.icon)}else{$("#icon").addClass("wi-cloud")}function b(j){var i="";switch(true){case (j<0):i="rgba(1, 1, 255, 1.0)";break;case ((j>=0)&&(j<4.44)):i="rgba(1, 146, 255, 1.0)";break;case ((j>=4.44)&&(j<10)):i="rgba(76, 192, 220, 1.0)";break;case ((j>=10)&&(j<15.56)):i="rgba(1, 255, 154, 1.0)";break;case ((j>=15.56)&&(j<21.11)):i="rgba(156, 255, 41, 1.0)";break;case ((j>=21.11)&&(j<26.67)):i="rgba(255, 248, 3, 1.0)";break;case ((j>=26.67)&&(j<32.22)):i="rgba(255, 163, 3, 1.0)";break;case ((j>=32.22)&&(j<37.78)):i="rgba(255, 87, 3, 1.0)";break;case (j>=37.78):i="rgba(255, 0, 0, 1.0)";break;default:i="pink";break}return i}var e=Math.round(h.currently.temperature);$("#tempC").html(e+"&deg;");$("#buttonM").html("C");$("#tempF").html(Math.round(e*1.8+32)+"&deg");$("#buttonI").html("F");$("body").css("background-color",b(e));$("#currentDescription").html(h.currently.summary);$("#dailySummaryM").html(h.daily.summary);var g=/([0-9]+°C)/g;var d=h.daily.summary.match(g);var f=Math.round(parseFloat(d)*1.8+32)+"°F";var a=(h.daily.summary).replace(d,f);$("#dailySummaryI").html(a);$("#windSpeedM").html((h.currently.windSpeed).toFixed(1)+" m/s ");$("#windSpeedI").html((h.currently.windSpeed*2.23694).toFixed(1)+" mph ");var c=Math.round(h.currently.windBearing);$("#compaz").addClass("towards-"+h.currently.windBearing+"-deg");$("#pressureM").html(Math.round(h.currently.pressure)+" hPa");$("#pressureI").html(Math.round(h.currently.pressure*0.03)+" inHg");$("#humidity").html(Math.round(h.currently.humidity*100)+"%");if(h.currently.visibility!==undefined){$("#visibilityM").html((h.currently.visibility).toFixed(1)+" km");$("#visibilityI").html((h.currently.visibility*0.621).toFixed(1)+" mi")}else{$("#visibilityM, #visibilityI").html("Unavailable")}if(h.currently.cloudCover!==undefined){$("#clouds").html(h.currently.cloudCover+"%")}else{$("#clouds").html("Unavailable")}}$("#buttonM, #buttonI").click(function(){$("#tempC, #tempF").toggleClass("goAway");$("#windSpeedM, #windSpeedI").toggleClass("goAway");$("#visibilityM, #visibilityI").toggleClass("goAway");$("#pressureM, #pressureI").toggleClass("goAway");$("#buttonM, #buttonI").toggleClass("goAway");$("#dailySummaryM, #dailySummaryI").toggleClass("goAway")});