var lat,lon;function pullWeather(){var c="011ffb7f7744c9434fcbcdc0c9a0b65f";var a="?units=si";var b="https://api.darksky.net/forecast/"+c+"/"+lat+","+lon+a;return $.ajax({url:b,dataType:"jsonp",success:function(d){console.log("Success! Displaying weather...");report(d)},error:function(){console.log("Unable to display weather.")}})}$.getJSON("https://ipinfo.io",function(b){console.log("IP address detected: "+b.ip+". Lat, Lon: "+lat+", "+lon);var a=b.loc.split(",");lat=a[0];lon=a[1];pullWeather()});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){lat=(a.coords.latitude).toFixed(3);lon=(a.coords.longitude).toFixed(3);console.log("HTML5 geolocation permitted. Lat, Lon: "+lat+", "+lon);pullWeather()})}else{console.log("HTML5 geolocation not permitted.")}function report(d){var e="AIzaSyAMejMCinUM1S2dzyVCpJf9q-Ns-e1YSnw";var i="https://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&key"+e;$.getJSON(i,function(k){$("#location").html(k.results[0].address_components[2].long_name+", "+k.results[0].address_components[3].long_name+", "+k.results[0].address_components[4].long_name)});if(d.currently.icon){$("#icon").addClass("wi-forecast-io-"+d.currently.icon)}else{$("#icon").addClass("wi-cloud")}function f(l){var k="";switch(true){case (l<0):k="rgba(1, 1, 255, 1.0)";break;case ((l>=0)&&(l<4.44)):k="rgba(1, 146, 255, 1.0)";break;case ((l>=4.44)&&(l<10)):k="rgba(76, 192, 220, 1.0)";break;case ((l>=10)&&(l<15.56)):k="rgba(1, 255, 154, 1.0)";break;case ((l>=15.56)&&(l<21.11)):k="rgba(156, 255, 41, 1.0)";break;case ((l>=21.11)&&(l<26.67)):k="rgba(255, 248, 3, 1.0)";break;case ((l>=26.67)&&(l<32.22)):k="rgba(255, 163, 3, 1.0)";break;case ((l>=32.22)&&(l<37.78)):k="rgba(255, 87, 3, 1.0)";break;case (l>=37.78):k="rgba(255, 0, 0, 1.0)";break;default:k="pink";break}return k}var j=Math.round(d.currently.temperature);$("#tempC").html(j+"&deg;");$("#buttonM").html("C");$("#tempF").html(Math.round(j*1.8+32)+"&deg");$("#buttonI").html("F");$("body").css("background-color",f(j));$("#currentDescription").html(d.currently.summary);$("#dailySummaryM").html(d.daily.summary);var g=/([0-9]+°C)/g;var h=d.daily.summary.match(g);var b=Math.round(parseFloat(h)*1.8+32)+"°F";var a=(d.daily.summary).replace(h,b);$("#dailySummaryI").html(a);$("#windSpeedM").html((d.currently.windSpeed).toFixed(1)+" m/s ");$("#windSpeedI").html((d.currently.windSpeed*2.23694).toFixed(1)+" mph ");var c=Math.round(d.currently.windBearing);$("#compaz").addClass("towards-"+d.currently.windBearing+"-deg");$("#pressureM").html(Math.round(d.currently.pressure)+" hPa");$("#pressureI").html(Math.round(d.currently.pressure*0.03)+" inHg");$("#humidity").html(Math.round(d.currently.humidity*100)+"%");if(d.currently.visibility!==undefined){$("#visibilityM").html((d.currently.visibility).toFixed(1)+" km");$("#visibilityI").html((d.currently.visibility*0.621).toFixed(1)+" mi")}else{$("#visibilityM, #visibilityI").html("Unavailable")}if(d.currently.cloudCover!==undefined){$("#clouds").html(d.currently.cloudCover+"%")}else{$("#clouds").html("Unavailable")}}$("#buttonM, #buttonI").click(function(){$("#tempC, #tempF").toggleClass("goAway");$("#windSpeedM, #windSpeedI").toggleClass("goAway");$("#visibilityM, #visibilityI").toggleClass("goAway");$("#pressureM, #pressureI").toggleClass("goAway");$("#buttonM, #buttonI").toggleClass("goAway");$("#dailySummaryM, #dailySummaryI").toggleClass("goAway")});